<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agnira Logistics - Freight Calculator</title>

  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body { box-sizing: border-box; }
    .gradient-bg {
      background: linear-gradient(135deg, #f1f103 0%, #df9708be 100%);
    }
    .result-card {
      animation: slideUp 0.4s ease-out;
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .input-focus:focus {
      outline: none;
      border-color: #c8ff00;
      box-shadow: 0 0 0 3px rgba(59,130,246,.1);
    }
  </style>
</head>

<body class="h-full">
<div id="app" class="w-full h-full overflow-auto">

  <!-- HEADER -->
  <header class="gradient-bg text-white py-12 px-6 text-center">
    <h1 id="companyName" class="text-5xl font-bold mb-3">Agnira Logistics</h1>
    <h2 id="pageTitle" class="text-3xl font-semibold mb-2">Freight Calculator</h2>
    <p id="tagline" class="text-xl opacity-90">
      Calculate your shipping costs instantly
    </p>
  </header>

  <!-- MAIN -->
  <main class="max-w-4xl mx-auto px-6 py-12">

    <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
      <form id="freightForm">

        <!-- VEHICLE -->
        <div class="mb-6">
          <label class="block text-lg font-semibold mb-3">Select Vehicle Type</label>
          <select id="vehicle" required
            class="w-full px-4 py-3 text-lg border-2 rounded-lg input-focus">
            <option value="">Choose a vehicle...</option>
            <option value="7ft">7 ft - Small Pickup</option>
            <option value="8ft">8 ft - Medium Pickup</option>
            <option value="10ft">10 ft - Mini Truck</option>
            <option value="14ft">14 ft - Standard Truck</option>
            <option value="17ft">17 ft - Medium Truck</option>
            <option value="19ft">19 ft - Large Truck</option>
            <option value="22ft">22 ft - Container Truck</option>
            <option value="24ft">24 ft - Heavy Container</option>
            <option value="32sxl">32 ft SXL</option>
            <option value="32mxl">32 ft MXL</option>
            <option value="40odc">40 ft ODC</option>
          </select>
        </div>

        <!-- WEIGHT -->
        <div class="mb-6">
          <label class="block text-lg font-semibold mb-3">Weight (Tons)</label>
          <input id="weight" type="number" step="0.1" min="0.1" required
            class="w-full px-4 py-3 text-lg border-2 rounded-lg input-focus" />
        </div>

        <!-- DISTANCE -->
        <div class="mb-6">
          <label class="block text-lg font-semibold mb-3">Distance (KM)</label>
          <input id="distance" type="number" min="1" required
            class="w-full px-4 py-3 text-lg border-2 rounded-lg input-focus" />
        </div>

        <button id="calculateBtn" type="submit"
          class="w-full bg-yellow-500 hover:bg-yellow-600 text-white font-bold text-xl py-4 rounded-lg">
          Calculate Freight Cost
        </button>

      </form>
    </div>

    <!-- RESULT -->
    <div id="resultSection" class="hidden">
      <div class="bg-gradient-to-r from-green-50 to-blue-50 rounded-2xl p-8 result-card">
        <h3 class="text-2xl font-bold text-center mb-6">Freight Calculation Result</h3>

        <div class="grid md:grid-cols-2 gap-6 mb-6">
          <div class="bg-white p-4 rounded">
            <p class="text-sm text-gray-600">Vehicle</p>
            <p id="resultVehicle" class="text-xl font-semibold"></p>
          </div>
          <div class="bg-white p-4 rounded">
            <p class="text-sm text-gray-600">Distance</p>
            <p id="resultDistance" class="text-xl font-semibold"></p>
          </div>
        </div>

        <div class="bg-blue-600 text-white rounded-xl p-6 text-center">
          <p class="text-lg">Total Freight</p>
          <p id="resultAmount" class="text-5xl font-bold"></p>
        </div>

        <ul class="mt-6 bg-white p-4 rounded text-sm space-y-1">
          <li id="marketFreight"></li>
          <li id="dieselCost"></li>
          <li id="driverCost"></li>
          <li id="tollCost"></li>
        </ul>
      </div>
    </div>

  </main>

</div>
<script>
/* ---------- VEHICLE NAMES ---------- */
const vehicleNames = {
  "7ft":"7 ft Small Pickup",
  "8ft":"8 ft Medium Pickup",
  "10ft":"10 ft Mini Truck",
  "14ft":"14 ft Truck",
  "17ft":"17 ft Truck",
  "19ft":"19 ft Truck",
  "22ft":"22 ft Container",
  "24ft":"24 ft Container",
  "32sxl":"32 ft SXL",
  "32mxl":"32 ft MXL",
  "40odc":"40 ft ODC"
};

/* ---------- RATE CALCULATION ---------- */
function calculateRate(vehicle, weight, distance, dieselPrice = 90) {

  const vehicles = {
    "7ft":{capacity:1.5,rateKm:18,mileage:35},
    "8ft":{capacity:2.5,rateKm:22,mileage:18},
    "10ft":{capacity:3.5,rateKm:28,mileage:14},
    "14ft":{capacity:7,rateKm:36,mileage:7},
    "17ft":{capacity:9,rateKm:42,mileage:6},
    "19ft":{capacity:12,rateKm:48,mileage:5.5},
    "22ft":{capacity:15,rateKm:58,mileage:5},
    "24ft":{capacity:18,rateKm:62,mileage:4.5},
    "32sxl":{capacity:20,rateKm:78,mileage:3.5},
    "32mxl":{capacity:24,rateKm:82,mileage:3.5},
    "40odc":{capacity:30,rateKm:120,mileage:2.8}
  };

  if (!vehicles[vehicle]) {
    return { error: "Please select a vehicle type" };
  }

  if (isNaN(weight) || weight <= 0) {
    return { error: "Please enter valid weight" };
  }

  if (isNaN(distance) || distance <= 0) {
    return { error: "Please enter valid distance" };
  }

  const v = vehicles[vehicle];

  if (weight > v.capacity) {
    return { error: "Weight exceeds selected vehicle capacity" };
  }

  const diesel = (distance / v.mileage) * dieselPrice;
  const driver = distance <= 800 ? 3500 : 7000;
  const toll = distance <= 800 ? 3000 : 7000;
  const maintenance = distance * 4;

  const operating = diesel + driver + toll + maintenance;
  const profit = operating * 0.12;
  const risk = operating * 0.05;

  const market = distance * v.rateKm;
  const finalFreight = Math.round(
    Math.max(operating + profit + risk, market)
  );

  return {
    finalFreight,
    breakdown: {
      diesel: Math.round(diesel),
      driver,
      toll,
      marketFreight: Math.round(market)
    }
  };
}

/* ---------- FORM SUBMIT ---------- */
document.getElementById("freightForm").addEventListener("submit", function (e) {
  e.preventDefault();

  const vehicleValue = document.getElementById("vehicle").value;
  const weight = Number(document.getElementById("weight").value);
  const distance = Number(document.getElementById("distance").value);

  const resultSection = document.getElementById("resultSection");
  resultSection.classList.add("hidden"); // reset

  const result = calculateRate(vehicleValue, weight, distance);

  if (result.error) {
    alert(result.error);
    return;
  }

  document.getElementById("resultVehicle").textContent =
    vehicleNames[vehicleValue];

  document.getElementById("resultDistance").textContent =
    distance + " KM";

  document.getElementById("resultAmount").textContent =
    "₹" + result.finalFreight.toLocaleString("en-IN");

  document.getElementById("marketFreight").textContent =
    "• Market Freight: ₹" + result.breakdown.marketFreight.toLocaleString("en-IN");

  document.getElementById("dieselCost").textContent =
    "• Diesel Cost: ₹" + result.breakdown.diesel.toLocaleString("en-IN");

  document.getElementById("driverCost").textContent =
    "• Driver Charges: ₹" + result.breakdown.driver.toLocaleString("en-IN");

  document.getElementById("tollCost").textContent =
    "• Toll Charges: ₹" + result.breakdown.toll.toLocaleString("en-IN");

  resultSection.classList.remove("hidden");
  resultSection.scrollIntoView({ behavior: "smooth" });
});
</script>



</body>
</html>
